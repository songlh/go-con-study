Author: Timothy St. Clair <tstclair@redhat.com>
Date:   Mon Dec 14 16:39:47 2015 -0600

    Update etcd godep to fix golang 1.5.1 data race

diff --git a/Godeps/Godeps.json b/Godeps/Godeps.json
index 613f5ba..ac37b4a 100644
--- a/Godeps/Godeps.json
+++ b/Godeps/Godeps.json
@@ -122,123 +122,123 @@
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/client",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/discovery",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/error",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/etcdserver",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/crc",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/fileutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/httputil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/idutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/ioutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/netutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/pathutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/pbutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/runtime",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/timeutil",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/transport",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/types",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/pkg/wait",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/raft",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/rafthttp",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/snap",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/storage",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/store",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/version",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/etcd/wal",
-			"Comment": "v2.2.2-1-g09b81ba",
-			"Rev": "09b81bad15e96e05dafd0494a8c165a13718c350"
+			"Comment": "v2.2.2-4-ge0c7768",
+			"Rev": "e0c7768f94cdc268b2fce31ada1dea823f11f505"
 		},
 		{
 			"ImportPath": "github.com/coreos/go-etcd/etcd",
diff --git a/Godeps/_workspace/src/github.com/coreos/etcd/client/client.go b/Godeps/_workspace/src/github.com/coreos/etcd/client/client.go
index 34adb82..e484032 100644
--- a/Godeps/_workspace/src/github.com/coreos/etcd/client/client.go
+++ b/Godeps/_workspace/src/github.com/coreos/etcd/client/client.go
@@ -378,9 +378,12 @@ func (c *simpleHTTPClient) Do(ctx context.Context, act httpAction) (*http.Respon
 		return nil, nil, err
 	}
 
-	hctx, hcancel := context.WithCancel(ctx)
+	var hctx context.Context
+	var hcancel context.CancelFunc
 	if c.headerTimeout > 0 {
 		hctx, hcancel = context.WithTimeout(ctx, c.headerTimeout)
+	} else {
+		hctx, hcancel = context.WithCancel(ctx)
 	}
 	defer hcancel()
 
diff --git a/Godeps/_workspace/src/github.com/coreos/etcd/store/watcher_hub.go b/Godeps/_workspace/src/github.com/coreos/etcd/store/watcher_hub.go
index d573eb3..25a701c 100644
--- a/Godeps/_workspace/src/github.com/coreos/etcd/store/watcher_hub.go
+++ b/Godeps/_workspace/src/github.com/coreos/etcd/store/watcher_hub.go
@@ -78,8 +78,9 @@ func (wh *watcherHub) watch(key string, recursive, stream bool, index, storeInde
 	defer wh.mutex.Unlock()
 	// If the event exists in the known history, append the EtcdIndex and return immediately
 	if event != nil {
-		event.EtcdIndex = storeIndex
-		w.eventChan <- event
+		ne := event.Clone()
+		ne.EtcdIndex = storeIndex
+		w.eventChan <- ne
 		return w, nil
 	}
 

commit 29bc5a36392a6c4320ce880aa7c561baa4f0ba2a
